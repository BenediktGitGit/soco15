<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="c3arch/c3.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="bootstrap-3.3.6-dist/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="bootstrap-3.3.6-dist/css/bootstrap-theme.min.css" type="text/css">

    <link rel="stylesheet" href="css/main.css" type="text/css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

</head>
<body>
<h1>Stockmarket Prediction - Neural Network Analysis Board</h1>

<script src="d3-master/d3.min.js" charset="utf-8"></script>
<script src="c3arch/c3.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript" src="canvasjs-1.7.0/canvasjs.min.js"></script>
<script type="text/javascript" src="bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>
<script src="js/main.js"></script>

<div class="charts-Box" style="margin-left: 10%; margin-right: 10%; ">
    <div class="container-fluid">
        <div class="col-xs-12 col-sm-offset-0 col-md-offset-0">
            <div class="row">
                <div class="col-xs-8">
                    <div id="chart"></div>
                </div>
                <div class="col-xs-4">
                    <div id="donut"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-8">
                <div id="chartContainer"></div>
            </div>
            <div class="colxs4">
                <div class="container-fluid">
                    <div class="col-xs-12">
                        <div class="prompt-boxes">
                            <div id="accurrancy"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
    // accurrancy: 1 - po/ro or 1 - ro/po
    // predicted value:
    // real value:

    var chartgen = 0;
    var donut = 0;
    var mse_chart = 0;

    var i = 1;
    var c = 0;


    var interval = 1500;
    var real_output_list = Create2DArray(4);
    var predicted_output_list = Create2DArray(4);
    var dist = Create2DArray(3);
    var dist_helper = Create2DArray(3);

    var dps = '[{"x": 1, "y": 70}, {"x": 2, "y": 60}, {"x": 3, "y": 50}, {"x": 4, "y": 40}, {"x": 5, "y": 20}, {"x": 6, "y": 10}]';
    var dps_json = JSON.parse(dps);
    var dps_iter = [];
    dps_iter.push(dps_json[0]);

    // GET predicted & real Value List

    real_output_list[0] = ['real output', 30, 200, 100, 400, 150];
    real_output_list[1] = ['real output', 200, 100, 400, 400, 300];
    real_output_list[2] = ['real output', 100, 400, 400, 300, 270];
    real_output_list[3] = ['real output', 400, 400, 300, 270, 290];

    predicted_output_list[0] = ['predicted output', 50, 20, 10, 40, 15];
    predicted_output_list[1] = ['predicted output', 20, 10, 40, 15, 70];
    predicted_output_list[2] = ['predicted output', 10, 40, 15, 70, 120];
    predicted_output_list[3] = ['predicted output', 40, 15, 70, 120, 79];

    ro_output = real_output_list[0][0];
    po_output = predicted_output_list[0][0];


    // GET Distribution List of Value List
    dist[0].push(['under', 1]);
    dist[1].push(['equal', 0]);
    dist[2].push(['over', 0]);
    dist[0].push(['under', 0]);
    dist[1].push(['equal', 1]);
    dist[2].push(['over', 0]);
    dist[0].push(['under', 0]);
    dist[1].push(['equal', 0]);
    dist[2].push(['over', 1]);
    dist[0].push(['under', 0]);
    dist[1].push(['equal', 0]);
    dist[2].push(['over', 1]);

    dist_helper[0] = dist[0][0];
    dist_helper[1] = dist[1][0];
    dist_helper[2] = dist[2][0];

    under_cap = dist[0][0];
    over_cap = dist[1][0];
    equal_cap = dist[2][0];

    chartgen = initChartProcessing();
    donut = initDonutProcessing();
    mse_chart = initMseChart();
    loadCharts(i, predicted_output_list.length);


    function Create2DArray(rows) {
        var arr = [];

        for (var i=0;i<rows;i++) {
            arr[i] = [];
        }

        return arr;
    }

    function initChartProcessing() {

        return c3.generate({
            x: ro_output,
            bindto: '#chart',
            data: {
                columns: [
                    real_output_list[0],
                    predicted_output_list[0]
                ]
            },
                axis: {
                    x: {
                        label: {
                            text: 'volume / periode',
                            position: 'outer-middle'
                        }
                    },
                    y: {
                        label: {
                            text: 'Period',
                            position: 'outer-middle'
                        }
                    }

            },
            color: {
                pattern: ['orange', 'yellow']
            },
            bindto: '#chart'
        });
    }

    function initDonutProcessing() {
        return c3.generate({
            data: {
                columns: [
                    dist_helper[0],
                    dist_helper[1],
                    dist_helper[2]
                ],
                type: 'donut',
                onclick: function (d, i) {
                    console.log("onclick", d, i);
                },
                onmouseover: function (d, i) {
                    console.log("onmouseover", d, i);
                },
                onmouseout: function (d, i) {
                    console.log("onmouseout", d, i);
                }
            },
            transition: {
                duration: 120
            },
            color: {
                pattern: ['orange', 'yellow', 'green']
            },
            donut: {
                title: "Distribution"
            },
            bindto: "#donut"
        });

        return donut;
    }


    function loadCharts(i, length) {
        setTimeout(function () {
            chartgen.load({
                columns: [
                    real_output_list[i],
                    predicted_output_list[i]
                ]
            });
            dist_helper[0].push(dist[0][i][1]);
            dist_helper[1].push(dist[1][i][1]);
            dist_helper[2].push(dist[2][i][1]);
            donut.load({
                columns: [
                    dist_helper[0],
                    dist_helper[1],
                    dist_helper[2]
                ]
            });
            dps_iter.push(dps_json[i]);
            mse_chart.render();
            i++;
            if (i < length) {
                loadCharts(i, length);
            }
        }, interval);
    }


    function initMseChart() {
        return new CanvasJS.Chart('chartContainer', {
            title: {

            },
            axisX: {
                title: "Timeseries",
                titleFontColor: "white",
                labelFontColor: "white",
                lineColor: "white"
            },
            axisY: {
                title: "MSE",
                titleFontColor: "white",
                labelFontColor: "white",
                lineColor: "white",
                gridColor: "white",
                gridThickness: 0.5
            },
            backgroundColor: "#1b6d85",
            legend : {
                fontColor: "#ff0000"
            },
            data: [{
                type: "line",
                indexLabelFontSize: 15,
                indexLabelFontColor: "white",
                color: "red",
                lineThickness: 4,
                dataPoints: dps_iter
            }]
        });

        mse_chart.render();
    }
</script>


</body>
</html>
